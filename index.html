<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Prueba Supabase</title>
  <!-- Librer√≠a externa -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
  <h1 id="resultado">Probando conexi√≥n...</h1>
  
  <script>
    // === IIFE: Funci√≥n autoejecutable para aislar el c√≥digo ===
    (async function() {
      try {
        // 1. TUS CLAVES (Reemplaza solo esto)
        const SUPABASE_URL = 'https://efxgpdbiscmsdrdlqzcv.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVmeGdwZGJpc2Ntc2RyZGxxemN2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIwNjM1NzMsImV4cCI6MjA4NzYzOTU3M30.BwxWMiaKwGoKtxSMtGCJ4PTdnuvJW-iSXtTds-Q78QE';

        // 2. Conexi√≥n segura (usamos 'client' en vez de 'supabase' para evitar conflictos)
        const client = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        // 3. Prueba de conexi√≥n
        const { data, error } = await client.from('preguntas').select('id').limit(1);
        
        const resultado = document.getElementById('resultado');
        if (error) {
          resultado.innerText = '‚ùå Error: ' + error.message;
          resultado.style.color = 'red';
        } else {
          resultado.innerText = '‚úÖ ¬°√âXITO! Conectado. Preguntas encontradas: ' + (data?.length || 0);
          resultado.style.color = 'green';
        }
      } catch (e) {
        document.getElementById('resultado').innerText = 'üí• Error fatal: ' + e.message;
        console.error(e);
      }
    })(); // <--- Fin de la funci√≥n autoejecutable
  </script>
</body>
</html>
